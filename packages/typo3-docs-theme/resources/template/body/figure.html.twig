{%- set alignClass = '' -%}
{%- if node.hasOption('align') -%}
    {%- if node.option('align') == 'left' -%}{%- set alignClass = 'float-left' -%}
    {%- elseif node.option('align') == 'right' -%}{%- set alignClass = 'float-right' -%}
    {%- elseif node.option('align') == 'center' -%}{%- set alignClass = 'align-center' -%}
    {%- endif -%}
{%- endif -%}
{%- set classes = node.classesString -%}
{%- if alignClass -%}{%- set classes = (classes ? classes ~ ' ' : '') ~ alignClass -%}{%- endif -%}
<figure
    {%- if classes %} class="{{ classes }}"{% endif -%}
    {%- if node.hasOption('figwidth') %} style="{% if node.hasOption('figwidth') %}width: {{ node.option('figwidth') }};{% endif %}"{% endif -%}
    {%- if node.hasOption('zoom') %} data-zoom="{{ node.option('zoom') }}"{% endif -%}
    {%- if node.hasOption('gallery') %} data-gallery="{{ node.option('gallery') }}"{% endif -%}
    {%- if node.hasOption('zoom-factor') %} data-zoom-factor="{{ node.option('zoom-factor') }}"{% endif -%}
    {%- if node.hasOption('zoom-indicator') %} data-zoom-indicator="{{ node.option('zoom-indicator') }}"{% endif -%}
>
    {{ renderNode(node.image) }}

    {% if node.document %}
        {% set caption = renderNode(node.document) %}

        {% if caption|trim %}
            <figcaption>{{ caption|raw }}</figcaption>
        {% endif %}
    {% endif %}
</figure>
